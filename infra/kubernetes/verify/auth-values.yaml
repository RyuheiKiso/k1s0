# k8s verify 用オーバーライド値 (auth-rust)
# ローカルDockerイメージ + インクラスターサービス名を使用
replicaCount: 1

image:
  registry: ""
  repository: k1s0-verify-auth-rust
  tag: latest
  pullPolicy: Never

imagePullSecrets: []

autoscaling:
  enabled: false

pdb:
  enabled: false

vault:
  enabled: false

resources:
  requests:
    cpu: 100m
    memory: 64Mi
  limits:
    cpu: 500m
    memory: 256Mi

serviceAccount:
  create: false
  name: "default"

config:
  mountPath: /etc/app
  data:
    config.yaml: |
      app:
        name: "auth-server"
        version: "0.1.0"
        environment: "dev"

      server:
        host: "0.0.0.0"
        port: 8080

      database:
        host: postgres.k1s0-system.svc.cluster.local
        port: 5432
        name: auth_db
        user: dev
        password: dev
        ssl_mode: disable

      auth:
        jwt:
          issuer: "http://localhost:8180/realms/k1s0"
          audience: "k1s0-api"
        jwks:
          url: "http://keycloak.k1s0-system.svc.cluster.local:8080/realms/k1s0/protocol/openid-connect/certs"
          cache_ttl_secs: 300

      kafka:
        brokers:
          - "kafka.k1s0-system.svc.cluster.local:9092"
        topic: "audit-events-dev"
