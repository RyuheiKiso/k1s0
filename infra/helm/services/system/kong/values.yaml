# Kong Helm Chart Base Values
# Chart: kong/kong
# Kong version: 3.8
# Mode: DB-backed (PostgreSQL)

image:
  repository: kong
  tag: "3.8"

env:
  database: postgres
  pg_host: postgres.k1s0-system.svc.cluster.local
  pg_port: "5432"
  pg_user: kong
  pg_database: kong
  pg_password:
    valueFrom:
      secretKeyRef:
        name: kong-db-secret
        key: password

proxy:
  enabled: true
  type: ClusterIP
  http:
    enabled: true
    containerPort: 8000
  tls:
    enabled: false                  # TLS は Nginx Ingress Controller で終端するため Kong 側では無効化
    containerPort: 8443

admin:
  enabled: true
  type: ClusterIP
  http:
    enabled: true
    containerPort: 8001
  tls:
    enabled: false

ingressController:
  enabled: false    # Ingress Controller は使わず Admin API で管理

postgresql:
  enabled: false    # 外部 PostgreSQL を使用

replicaCount: 2

resources:
  requests:
    cpu: 500m
    memory: 512Mi
  limits:
    cpu: 2000m
    memory: 2Gi
