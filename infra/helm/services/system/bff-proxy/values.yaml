nameOverride: ""
fullnameOverride: ""

image:
  registry: harbor.internal.example.com
  repository: k1s0-system/bff-proxy
  tag: ""
  pullPolicy: IfNotPresent

imagePullSecrets:
  - name: harbor-pull-secret

replicaCount: 2

container:
  port: 8080
  command: []
  args: []

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

probes:
  liveness:
    httpGet:
      path: /healthz
      port: http
    initialDelaySeconds: 5
    periodSeconds: 15
    failureThreshold: 3
  readiness:
    httpGet:
      path: /readyz
      port: http
    initialDelaySeconds: 3
    periodSeconds: 5
    failureThreshold: 3

service:
  type: ClusterIP
  port: 80

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

pdb:
  enabled: true
  minAvailable: 1

ingress:
  enabled: false
  ingressClassName: nginx

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65532
  fsGroup: 65532
containerSecurityContext:
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false
  capabilities:
    drop: ["ALL"]

config:
  mountPath: /etc/app
  data: {}

vault:
  enabled: true
  role: "system"
  secrets:
    - path: "secret/data/k1s0/system/bff-proxy/oidc"
      key: "client_secret"
      mountPath: "/vault/secrets/oidc-client-secret"
    - path: "secret/data/k1s0/system/bff-proxy/redis"
      key: "password"
      mountPath: "/vault/secrets/redis-password"

nodeSelector: {}
tolerations: []
affinity: {}

serviceAccount:
  create: true
  name: ""
  annotations: {}

podAnnotations: {}

labels:
  tier: system

metrics:
  enabled: true
  port: 8080
  path: /metrics

serviceMonitor:
  enabled: true
  interval: 30s

redis:
  enabled: true
  host: "redis.k1s0-system.svc.cluster.local"
