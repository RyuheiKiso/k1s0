<mxfile>
  <diagram name="Metadata-Driven Flow">
    <mxGraphModel dx="1600" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="800">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="2" value="Master Maintenance Server: Metadata-Driven Flow" style="text;html=1;fontSize=20;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="400" y="10" width="600" height="40" as="geometry"/>
        </mxCell>

        <!-- Key Message -->
        <mxCell id="3" value="Zero custom code per table" style="text;html=1;fontSize=14;fontStyle=3;align=center;verticalAlign=middle;fontColor=#CC0000;" vertex="1" parent="1">
          <mxGeometry x="500" y="740" width="400" height="30" as="geometry"/>
        </mxCell>

        <!-- Phase 1 Swimlane: Developer Definition (blue) -->
        <mxCell id="100" value="Phase 1: Developer Definition" style="swimlane;startSize=30;fillColor=#dae8fc;strokeColor=#6c8ebf;rounded=1;arcSize=8;fontStyle=1;fontSize=12;swimlaneLine=0;horizontal=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="60" width="300" height="670" as="geometry"/>
        </mxCell>

        <!-- Developer Icon -->
        <mxCell id="101" value="Developer" style="shape=mxgraph.basic.person;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;" vertex="1" parent="100">
          <mxGeometry x="110" y="50" width="80" height="100" as="geometry"/>
        </mxCell>

        <!-- Define table_definitions -->
        <mxCell id="102" value="Define&#xa;table_definitions" style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=0;" vertex="1" parent="100">
          <mxGeometry x="60" y="190" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Define column_definitions -->
        <mxCell id="103" value="Define&#xa;column_definitions" style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=0;" vertex="1" parent="100">
          <mxGeometry x="60" y="280" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Define consistency_rules -->
        <mxCell id="104" value="Define&#xa;consistency_rules" style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=0;" vertex="1" parent="100">
          <mxGeometry x="60" y="370" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrows within Phase 1 -->
        <mxCell id="110" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#6c8ebf;" edge="1" parent="100" source="101" target="102">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="111" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#6c8ebf;" edge="1" parent="100" source="102" target="103">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="112" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#6c8ebf;" edge="1" parent="100" source="103" target="104">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Phase 2 Swimlane: Metadata Registration (orange) -->
        <mxCell id="200" value="Phase 2: Metadata Registration" style="swimlane;startSize=30;fillColor=#fff2cc;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fontSize=12;swimlaneLine=0;horizontal=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="60" width="300" height="670" as="geometry"/>
        </mxCell>

        <!-- REST API / gRPC -->
        <mxCell id="201" value="REST API / gRPC&#xa;Endpoint" style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1;" vertex="1" parent="200">
          <mxGeometry x="60" y="100" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Schema Validation -->
        <mxCell id="202" value="Schema Validation" style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="200">
          <mxGeometry x="60" y="210" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- PostgreSQL Storage -->
        <mxCell id="203" value="Metadata stored in&#xa;PostgreSQL" style="shape=cylinder3;size=10;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;whiteSpace=wrap;" vertex="1" parent="200">
          <mxGeometry x="80" y="330" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- Arrows within Phase 2 -->
        <mxCell id="210" value="validate" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#d6b656;fontSize=10;" edge="1" parent="200" source="201" target="202">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="211" value="persist" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#d6b656;fontSize=10;" edge="1" parent="200" source="202" target="203">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Phase 3 Swimlane: Runtime Engine (purple) -->
        <mxCell id="300" value="Phase 3: Runtime Engine" style="swimlane;startSize=30;fillColor=#e1d5e7;strokeColor=#9673a6;rounded=1;arcSize=8;fontStyle=1;fontSize=12;swimlaneLine=0;horizontal=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="60" width="300" height="670" as="geometry"/>
        </mxCell>

        <!-- Metadata Reader -->
        <mxCell id="301" value="Metadata Reader&#xa;(table / column definitions)" style="rounded=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="300">
          <mxGeometry x="40" y="70" width="220" height="55" as="geometry"/>
        </mxCell>

        <!-- Dynamic Query Builder -->
        <mxCell id="302" value="Dynamic Query Builder&#xa;(generates SQL from metadata)" style="rounded=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="300">
          <mxGeometry x="40" y="180" width="220" height="55" as="geometry"/>
        </mxCell>

        <!-- ZEN Rule Engine -->
        <mxCell id="303" value="ZEN Rule Engine&#xa;(loads consistency rules)" style="rounded=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="300">
          <mxGeometry x="40" y="290" width="220" height="55" as="geometry"/>
        </mxCell>

        <!-- JSON Schema Generator -->
        <mxCell id="304" value="JSON Schema Generator&#xa;(creates form schemas)" style="rounded=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="300">
          <mxGeometry x="40" y="400" width="220" height="55" as="geometry"/>
        </mxCell>

        <!-- Arrows within Phase 3 -->
        <mxCell id="310" value="read" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#9673a6;fontSize=10;" edge="1" parent="300" source="301" target="302">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="311" value="rules" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#9673a6;fontSize=10;" edge="1" parent="300" source="301" target="303">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="20" y="200"/>
              <mxPoint x="20" y="310"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="312" value="schema" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#9673a6;fontSize=10;" edge="1" parent="300" source="302" target="304">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Phase 4 Swimlane: Auto-Generated UI (green) -->
        <mxCell id="400" value="Phase 4: Auto-Generated UI" style="swimlane;startSize=30;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;arcSize=8;fontStyle=1;fontSize=12;swimlaneLine=0;horizontal=1;" vertex="1" parent="1">
          <mxGeometry x="1080" y="60" width="300" height="670" as="geometry"/>
        </mxCell>

        <!-- Dynamic Form -->
        <mxCell id="401" value="Dynamic Form&#xa;(Create / Edit)" style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="400">
          <mxGeometry x="60" y="70" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Dynamic Data Grid -->
        <mxCell id="402" value="Dynamic Data Grid&#xa;(List)" style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="400">
          <mxGeometry x="60" y="160" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Relationship Navigator -->
        <mxCell id="403" value="Relationship&#xa;Navigator" style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="400">
          <mxGeometry x="60" y="250" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Consistency Check Dashboard -->
        <mxCell id="404" value="Consistency Check&#xa;Dashboard" style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="400">
          <mxGeometry x="60" y="340" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- End User Icon -->
        <mxCell id="405" value="End User" style="shape=mxgraph.basic.person;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="400">
          <mxGeometry x="110" y="450" width="80" height="100" as="geometry"/>
        </mxCell>

        <!-- Arrows within Phase 4 to End User -->
        <mxCell id="410" style="endArrow=block;endFill=1;strokeWidth=1;strokeColor=#82b366;dashed=1;" edge="1" parent="400" source="401" target="405">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="95"/>
              <mxPoint x="260" y="490"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="411" style="endArrow=block;endFill=1;strokeWidth=1;strokeColor=#82b366;dashed=1;" edge="1" parent="400" source="402" target="405">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="185"/>
              <mxPoint x="260" y="490"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="412" style="endArrow=block;endFill=1;strokeWidth=1;strokeColor=#82b366;dashed=1;" edge="1" parent="400" source="403" target="405">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="275"/>
              <mxPoint x="260" y="490"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="413" style="endArrow=block;endFill=1;strokeWidth=1;strokeColor=#82b366;dashed=1;" edge="1" parent="400" source="404" target="405">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="365"/>
              <mxPoint x="260" y="490"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Phase-to-Phase Arrows (connecting across swimlanes) -->

        <!-- Phase 1 to Phase 2: Developer sends definitions -->
        <mxCell id="501" value="register metadata" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#333333;fontSize=11;fontStyle=1;" edge="1" parent="1" source="104" target="201">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="350" y="460"/>
              <mxPoint x="350" y="185"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Phase 2 to Phase 3: Stored metadata feeds engine -->
        <mxCell id="502" value="load metadata" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#333333;fontSize=11;fontStyle=1;" edge="1" parent="1" source="203" target="301">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="710" y="440"/>
              <mxPoint x="710" y="158"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Phase 3 to Phase 4: Engine generates UI -->
        <mxCell id="503" value="generate UI" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#333333;fontSize=11;fontStyle=1;" edge="1" parent="1" source="304" target="401">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="520"/>
              <mxPoint x="1060" y="155"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Phase 3 Query Builder to Phase 4 Data Grid -->
        <mxCell id="504" value="SQL queries" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#666666;fontSize=10;dashed=1;" edge="1" parent="1" source="302" target="402">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="298"/>
              <mxPoint x="1060" y="250"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Phase 3 ZEN Rule Engine to Phase 4 Consistency Dashboard -->
        <mxCell id="505" value="rule results" style="endArrow=block;endFill=1;strokeWidth=1.5;strokeColor=#666666;fontSize=10;dashed=1;" edge="1" parent="1" source="303" target="404">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="410"/>
              <mxPoint x="1060" y="430"/>
            </Array>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
