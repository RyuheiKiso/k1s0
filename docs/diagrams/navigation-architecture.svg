<svg xmlns="http://www.w3.org/2000/svg" width="900" height="640" viewBox="0 0 900 640">
  <defs>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#555"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="32" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="18" font-weight="bold" fill="#333">Navigation アーキテクチャ全体像</text>

  <!-- navigation.yaml (orange) -->
  <rect x="275" y="52" width="350" height="72" rx="8" fill="#FFE6CC" stroke="#D79B00" stroke-width="1.5"/>
  <text x="450" y="76" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="13" font-weight="bold" fill="#333">navigation.yaml</text>
  <text x="450" y="96" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" fill="#555">単一の真実の源泉</text>
  <text x="450" y="114" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#777">+ navigation-schema.json（IDE 補完）</text>

  <!-- yaml → buildtime arrow -->
  <polyline points="345,124 345,155 172,155 172,172" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="242" y="150" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#555">buildtime</text>

  <!-- yaml → runtime arrow -->
  <polyline points="555,124 555,155 727,155 727,172" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="657" y="150" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#555">runtime</text>

  <!-- buildtime container -->
  <rect x="30" y="172" width="284" height="196" rx="6" fill="#fafafa" stroke="#aaa" stroke-width="1.5" stroke-dasharray="7,3"/>
  <text x="172" y="192" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" font-weight="bold" fill="#666">buildtime</text>

  <!-- CLI codegen -->
  <rect x="67" y="200" width="210" height="44" rx="6" fill="#dae8fc" stroke="#6c8ebf" stroke-width="1.5"/>
  <text x="172" y="227" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="12" font-weight="bold" fill="#333">k1s0 CLI codegen</text>

  <!-- CLI → route-types -->
  <polyline points="130,244 100,244 100,282" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>
  <!-- CLI → component-registry -->
  <polyline points="214,244 245,244 245,282" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- route-types -->
  <rect x="40" y="282" width="120" height="68" rx="6" fill="#dae8fc" stroke="#6c8ebf" stroke-width="1.5"/>
  <text x="100" y="304" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" fill="#333">route-types</text>
  <text x="100" y="320" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#555">.ts / .dart</text>
  <text x="100" y="338" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="9" fill="#777">型安全なルートID</text>

  <!-- component-registry -->
  <rect x="185" y="282" width="114" height="68" rx="6" fill="#dae8fc" stroke="#6c8ebf" stroke-width="1.5"/>
  <text x="242" y="304" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#333">component-</text>
  <text x="242" y="320" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#333">registry</text>
  <text x="242" y="338" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="9" fill="#777">ID → Component</text>

  <!-- runtime container -->
  <rect x="586" y="172" width="284" height="196" rx="6" fill="#fafafa" stroke="#aaa" stroke-width="1.5" stroke-dasharray="7,3"/>
  <text x="728" y="192" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" font-weight="bold" fill="#666">runtime</text>

  <!-- system server -->
  <rect x="623" y="200" width="210" height="55" rx="6" fill="#d5e8d4" stroke="#82b366" stroke-width="1.5"/>
  <text x="728" y="223" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="12" font-weight="bold" fill="#333">system server</text>
  <text x="728" y="243" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#555">GET /api/v1/navigation</text>

  <!-- server → response arrow -->
  <line x1="728" y1="255" x2="728" y2="280" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- NavigationResponse -->
  <rect x="653" y="280" width="150" height="68" rx="6" fill="#d5e8d4" stroke="#82b366" stroke-width="1.5"/>
  <text x="728" y="302" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" fill="#333">NavigationResponse</text>
  <text x="728" y="320" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="10" fill="#555">proto → JSON</text>
  <text x="728" y="338" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="9" fill="#777">クライアントへ配信</text>

  <!-- buildtime → interpreter -->
  <polyline points="172,368 172,400 330,400 330,418" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>
  <!-- runtime → interpreter -->
  <polyline points="728,368 728,400 570,400 570,418" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- NavigationInterpreter (purple) -->
  <rect x="250" y="418" width="400" height="64" rx="8" fill="#e1d5e7" stroke="#9673a6" stroke-width="2"/>
  <text x="450" y="445" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" fill="#333">NavigationInterpreter</text>
  <text x="450" y="466" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" fill="#555">system-client SDK</text>

  <!-- interpreter → React -->
  <polyline points="340,482 340,510 175,510 175,543" fill="none" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>
  <!-- interpreter → Flutter -->
  <line x1="450" y1="482" x2="450" y2="543" stroke="#555" stroke-width="1.5" marker-end="url(#arr)"/>
  <!-- React -->
  <rect x="70" y="543" width="210" height="64" rx="8" fill="#fff2cc" stroke="#d6b656" stroke-width="1.5"/>
  <text x="175" y="570" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" fill="#333">React</text>
  <text x="175" y="590" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" fill="#555">TanStack Router</text>

  <!-- Flutter -->
  <rect x="345" y="543" width="210" height="64" rx="8" fill="#fff2cc" stroke="#d6b656" stroke-width="1.5"/>
  <text x="450" y="570" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" fill="#333">Flutter</text>
  <text x="450" y="590" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="11" fill="#555">GoRouter</text>

</svg>
