<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 580" font-family="'Segoe UI', 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <marker id="arrow-solid" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-solid-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#b85450"/>
    </marker>
    <marker id="arrow-open" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polyline points="0 0, 10 3.5, 0 7" fill="none" stroke="#82b366" stroke-width="1.5"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="820" height="580" fill="#fafafa" rx="4"/>

  <!-- ============ CLI Layer ============ -->
  <rect x="100" y="20" width="620" height="85" rx="10" fill="#dae8fc" stroke="#6c8ebf" stroke-width="1.5"/>
  <text x="120" y="42" font-size="15" font-weight="bold" fill="#1a3a5c">CLI レイヤー</text>
  <!-- main.rs box -->
  <rect x="150" y="55" width="110" height="36" rx="6" fill="#fff" stroke="#6c8ebf" stroke-width="1.2"/>
  <text x="205" y="78" text-anchor="middle" font-size="13" fill="#333">main.rs</text>
  <!-- cli.rs box -->
  <rect x="290" y="55" width="110" height="36" rx="6" fill="#fff" stroke="#6c8ebf" stroke-width="1.2"/>
  <text x="345" y="78" text-anchor="middle" font-size="13" fill="#333">cli.rs</text>
  <!-- Description -->
  <text x="430" y="70" font-size="11" fill="#4a6a8a">clap で引数パース</text>
  <text x="430" y="86" font-size="11" fill="#4a6a8a">ユースケースに依存を注入</text>

  <!-- Arrow: CLI -> Application -->
  <line x1="410" y1="105" x2="410" y2="145" stroke="#666" stroke-width="2.2" marker-end="url(#arrow-solid)"/>

  <!-- ============ Application Layer ============ -->
  <rect x="100" y="150" width="620" height="105" rx="10" fill="#d5e8d4" stroke="#82b366" stroke-width="1.5"/>
  <text x="120" y="175" font-size="15" font-weight="bold" fill="#2d5a1e">アプリケーション層</text>
  <!-- UseCase box -->
  <rect x="130" y="192" width="175" height="40" rx="6" fill="#fff" stroke="#82b366" stroke-width="1.2"/>
  <text x="217" y="217" text-anchor="middle" font-size="13" fill="#333">NewProjectUseCase</text>
  <!-- UserPrompt trait -->
  <rect x="350" y="188" width="145" height="48" rx="6" fill="#fff" stroke="#82b366" stroke-width="1.2"/>
  <text x="422" y="207" text-anchor="middle" font-size="10" font-style="italic" fill="#555">&lt;&lt;trait&gt;&gt;</text>
  <text x="422" y="225" text-anchor="middle" font-size="13" fill="#333">UserPrompt</text>
  <!-- FileGenerator trait -->
  <rect x="525" y="188" width="170" height="48" rx="6" fill="#fff" stroke="#82b366" stroke-width="1.2"/>
  <text x="610" y="207" text-anchor="middle" font-size="10" font-style="italic" fill="#555">&lt;&lt;trait&gt;&gt;</text>
  <text x="610" y="225" text-anchor="middle" font-size="13" fill="#333">FileGenerator</text>
  <!-- Dashed arrow: UseCase -> Traits -->
  <line x1="305" y1="212" x2="347" y2="212" stroke="#82b366" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-open)"/>

  <!-- Arrow: App -> Domain -->
  <line x1="260" y1="255" x2="260" y2="295" stroke="#666" stroke-width="2.2" marker-end="url(#arrow-solid)"/>
  <!-- Arrow: App -> Infrastructure (dashed = trait impl) -->
  <line x1="540" y1="255" x2="540" y2="295" stroke="#666" stroke-width="2.2" stroke-dasharray="7,4" marker-end="url(#arrow-solid)"/>
  <text x="550" y="280" font-size="10" fill="#666">実装</text>

  <!-- ============ Domain Layer ============ -->
  <rect x="100" y="300" width="310" height="130" rx="10" fill="#fff2cc" stroke="#d6b656" stroke-width="1.5"/>
  <text x="120" y="325" font-size="15" font-weight="bold" fill="#7a6520">ドメイン層</text>
  <!-- model.rs box -->
  <rect x="120" y="340" width="180" height="70" rx="6" fill="#fff" stroke="#d6b656" stroke-width="1.2"/>
  <text x="210" y="358" text-anchor="middle" font-size="12" font-weight="bold" fill="#333">model.rs</text>
  <text x="210" y="374" text-anchor="middle" font-size="10.5" fill="#555">ProjectType / Template</text>
  <text x="210" y="390" text-anchor="middle" font-size="10.5" fill="#555">Database / ProjectConfig</text>
  <!-- validation.rs box -->
  <rect x="315" y="340" width="78" height="70" rx="6" fill="#fff" stroke="#d6b656" stroke-width="1.2"/>
  <text x="354" y="365" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">validation</text>
  <text x="354" y="382" text-anchor="middle" font-size="10" fill="#555">.rs</text>

  <!-- ============ Infrastructure Layer ============ -->
  <rect x="440" y="300" width="280" height="260" rx="10" fill="#f8cecc" stroke="#b85450" stroke-width="1.5"/>
  <text x="458" y="325" font-size="15" font-weight="bold" fill="#8a2a2a">インフラストラクチャ層</text>
  <!-- DialoguerPrompt box -->
  <rect x="460" y="340" width="160" height="42" rx="6" fill="#fff" stroke="#b85450" stroke-width="1.2"/>
  <text x="540" y="356" text-anchor="middle" font-size="12" fill="#333">DialoguerPrompt</text>
  <text x="540" y="372" text-anchor="middle" font-size="10" fill="#888">(UserPrompt 実装)</text>
  <!-- FsGenerator box -->
  <rect x="460" y="395" width="160" height="42" rx="6" fill="#fff" stroke="#b85450" stroke-width="1.2"/>
  <text x="540" y="411" text-anchor="middle" font-size="12" fill="#333">FsGenerator</text>
  <text x="540" y="427" text-anchor="middle" font-size="10" fill="#888">(FileGenerator 実装)</text>

  <!-- Arrow: FsGenerator -> Templates -->
  <line x1="540" y1="437" x2="540" y2="457" stroke="#b85450" stroke-width="1.8" marker-end="url(#arrow-solid-red)"/>

  <!-- Template sub-box -->
  <rect x="455" y="462" width="250" height="85" rx="8" fill="#fce5cd" stroke="#d79b5a" stroke-width="1.2"/>
  <text x="470" y="480" font-size="12" font-weight="bold" fill="#8a5a1a">テンプレートシステム</text>
  <!-- React -->
  <rect x="468" y="490" width="52" height="24" rx="4" fill="#fff" stroke="#d79b5a" stroke-width="1"/>
  <text x="494" y="507" text-anchor="middle" font-size="10" fill="#333">React</text>
  <!-- Flutter -->
  <rect x="468" y="518" width="52" height="24" rx="4" fill="#fff" stroke="#d79b5a" stroke-width="1"/>
  <text x="494" y="535" text-anchor="middle" font-size="10" fill="#333">Flutter</text>
  <!-- Rust -->
  <rect x="528" y="490" width="62" height="24" rx="4" fill="#fff" stroke="#d79b5a" stroke-width="1"/>
  <text x="559" y="507" text-anchor="middle" font-size="10" fill="#333">Rust/Axum</text>
  <!-- Go -->
  <rect x="528" y="518" width="62" height="24" rx="4" fill="#fff" stroke="#d79b5a" stroke-width="1"/>
  <text x="559" y="535" text-anchor="middle" font-size="10" fill="#333">Go/Gin</text>
  <!-- Shared -->
  <rect x="598" y="490" width="95" height="52" rx="4" fill="#fff" stroke="#d79b5a" stroke-width="1"/>
  <text x="645" y="512" text-anchor="middle" font-size="9.5" fill="#555">docker-compose</text>
  <text x="645" y="527" text-anchor="middle" font-size="9.5" fill="#555">migrations</text>

  <!-- ============ Legend ============ -->
  <rect x="100" y="455" width="280" height="105" rx="8" fill="#f5f5f5" stroke="#ccc" stroke-width="1"/>
  <text x="118" y="477" font-size="13" font-weight="bold" fill="#333">凡例</text>
  <!-- Solid arrow -->
  <line x1="118" y1="498" x2="175" y2="498" stroke="#666" stroke-width="2.2" marker-end="url(#arrow-solid)"/>
  <text x="192" y="503" font-size="11" fill="#333">依存方向</text>
  <!-- Dashed arrow -->
  <line x1="118" y1="522" x2="175" y2="522" stroke="#666" stroke-width="2.2" stroke-dasharray="7,4" marker-end="url(#arrow-solid)"/>
  <text x="192" y="527" font-size="11" fill="#333">トレイト実装</text>
  <!-- Open dashed arrow -->
  <line x1="118" y1="546" x2="175" y2="546" stroke="#82b366" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-open)"/>
  <text x="192" y="551" font-size="11" fill="#333">トレイトに依存</text>
</svg>